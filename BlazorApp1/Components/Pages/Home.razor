@page "/"
@using FlightStatusWeb.Components.Models
@using Microsoft.AspNetCore.SignalR.Client
@inject NavigationManager Nav

<h3>Flight Status Board</h3>

<table class="table table-striped">
    <thead>
        <tr>
            <th>Time</th>
            <th>Destination</th>
            <th>Flight</th>
            <th>Gate</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Hello</td>
        </tr>
        @* @foreach (var flight in Flights)
        {
            <tr>
                <td>@flight.Time.ToShortTimeString()</td>
                <td>@flight.Destination</td>
                <td>@flight.FlightNumber</td>
                <td>@flight.Gate</td>
                <td>@flight.Status</td>
            </tr>
        } *@
    </tbody>
</table>

@code {
    // private HubConnection hubConnection;
    // private List<Flight> Flights = new();

    // protected override async Task OnInitializedAsync()
    // {
    //     hubConnection = new HubConnectionBuilder()
    //         .WithUrl(Nav.ToAbsoluteUri("/flighthub"))
    //         .Build();

    //     hubConnection.On<Flight>("ReceiveFlightUpdate", (flight) =>
    //     {
    //         var existing = Flights.FirstOrDefault(f => f.FlightNumber == flight.FlightNumber);
    //         if (existing != null)
    //         {
    //             existing.Status = flight.Status;
    //         }
    //         else
    //         {
    //             Flights.Add(flight);
    //         }
    //         StateHasChanged();
    //     });

    //     await hubConnection.StartAsync();
    // }
}
